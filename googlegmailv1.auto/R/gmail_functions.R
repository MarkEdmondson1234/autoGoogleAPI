#' Gmail API
#' Access Gmail mailboxes including sending user email.
#' 
#' Auto-generated code by googleAuthR::gar_create_api_skeleton
#'  at 2017-03-05 19:54:07
#' filename: /Users/mark/dev/R/autoGoogleAPI/googlegmailv1.auto/R/gmail_functions.R
#' api_json: api_json
#' 
#' @details 
#' Authentication scopes used are:
#' \itemize{
#'   \item https://mail.google.com/
#' \item https://www.googleapis.com/auth/gmail.compose
#' \item https://www.googleapis.com/auth/gmail.insert
#' \item https://www.googleapis.com/auth/gmail.labels
#' \item https://www.googleapis.com/auth/gmail.metadata
#' \item https://www.googleapis.com/auth/gmail.modify
#' \item https://www.googleapis.com/auth/gmail.readonly
#' \item https://www.googleapis.com/auth/gmail.send
#' \item https://www.googleapis.com/auth/gmail.settings.basic
#' \item https://www.googleapis.com/auth/gmail.settings.sharing
#' }
#' 
#' @docType package 
#' @name gmail_googleAuthR
#' 
NULL
## NULL

#' A helper function that tests whether an object is either NULL _or_
#' a list of NULLs
#'
#' @keywords internal
is.NullOb <- function(x) is.null(x) | all(sapply(x, is.null))
#' Recursively step down into list, removing all such objects
#'
#' @keywords internal
rmNullObs <- function(x) {
    x <- Filter(Negate(is.NullOb), x)
    lapply(x, function(x) if (is.list(x)) 
        rmNullObs(x) else x)
}

#' Gets the current user's Gmail profile.
#' 
#' Autogenerated via \code{\link[googleAuthR]{gar_create_api_skeleton}}
#' 
#' @seealso \href{https://developers.google.com/gmail/api/}{Google Documentation}
#' 
#' @details 
#' Authentication scopes used by this function are:
#' \itemize{
#'   \item https://mail.google.com/
#' \item https://www.googleapis.com/auth/gmail.compose
#' \item https://www.googleapis.com/auth/gmail.metadata
#' \item https://www.googleapis.com/auth/gmail.modify
#' \item https://www.googleapis.com/auth/gmail.readonly
#' }
#' 
#' Set \code{options(googleAuthR.scopes.selected = c(https://mail.google.com/, https://www.googleapis.com/auth/gmail.compose, https://www.googleapis.com/auth/gmail.metadata, https://www.googleapis.com/auth/gmail.modify, https://www.googleapis.com/auth/gmail.readonly)}
#' Then run \code{googleAuthR::gar_auth()} to authenticate.
#' See \code{\link[googleAuthR]{gar_auth}} for details. 
#' 
#' @param userId The user's email address
#' @importFrom googleAuthR gar_api_generator
#' @export
users.getProfile <- function(userId) {
    url <- sprintf("https://www.googleapis.com/gmail/v1/users/%s/profile", userId)
    # gmail.users.getProfile
    f <- googleAuthR::gar_api_generator(url, "GET", data_parse_function = function(x) x)
    f()
    
}

#' Stop receiving push notifications for the given user mailbox.
#' 
#' Autogenerated via \code{\link[googleAuthR]{gar_create_api_skeleton}}
#' 
#' @seealso \href{https://developers.google.com/gmail/api/}{Google Documentation}
#' 
#' @details 
#' Authentication scopes used by this function are:
#' \itemize{
#'   \item https://mail.google.com/
#' \item https://www.googleapis.com/auth/gmail.metadata
#' \item https://www.googleapis.com/auth/gmail.modify
#' \item https://www.googleapis.com/auth/gmail.readonly
#' }
#' 
#' Set \code{options(googleAuthR.scopes.selected = c(https://mail.google.com/, https://www.googleapis.com/auth/gmail.metadata, https://www.googleapis.com/auth/gmail.modify, https://www.googleapis.com/auth/gmail.readonly)}
#' Then run \code{googleAuthR::gar_auth()} to authenticate.
#' See \code{\link[googleAuthR]{gar_auth}} for details. 
#' 
#' @param userId The user's email address
#' @importFrom googleAuthR gar_api_generator
#' @export
users.stop <- function(userId) {
    url <- sprintf("https://www.googleapis.com/gmail/v1/users/%s/stop", userId)
    # gmail.users.stop
    f <- googleAuthR::gar_api_generator(url, "POST", data_parse_function = function(x) x)
    f()
    
}


#' Set up or update a push notification watch on the given user mailbox.
#' 
#' Autogenerated via \code{\link[googleAuthR]{gar_create_api_skeleton}}
#' 
#' @seealso \href{https://developers.google.com/gmail/api/}{Google Documentation}
#' 
#' @details 
#' Authentication scopes used by this function are:
#' \itemize{
#'   \item https://mail.google.com/
#' \item https://www.googleapis.com/auth/gmail.metadata
#' \item https://www.googleapis.com/auth/gmail.modify
#' \item https://www.googleapis.com/auth/gmail.readonly
#' }
#' 
#' Set \code{options(googleAuthR.scopes.selected = c(https://mail.google.com/, https://www.googleapis.com/auth/gmail.metadata, https://www.googleapis.com/auth/gmail.modify, https://www.googleapis.com/auth/gmail.readonly)}
#' Then run \code{googleAuthR::gar_auth()} to authenticate.
#' See \code{\link[googleAuthR]{gar_auth}} for details. 
#' 
#' @param WatchRequest The \link{WatchRequest} object to pass to this method
#' @param userId The user's email address
#' @importFrom googleAuthR gar_api_generator
#' @family WatchRequest functions
#' @export


users.watch <- function(WatchRequest, userId) {
    
    
    url <- sprintf("https://www.googleapis.com/gmail/v1/users/%s/watch", userId)
    # gmail.users.watch
    
    f <- googleAuthR::gar_api_generator(url, "POST", data_parse_function = function(x) x)
    
    stopifnot(inherits(WatchRequest, "gar_WatchRequest"))
    
    f(the_body = WatchRequest)
    
    
}



